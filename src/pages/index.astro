---
import type { CollectionEntry } from "astro:content";
import BookControlPanel from "@/components/widget/ControlPanel/BookControlPanel.astro";
import ControlPanel from "@/components/widget/ControlPanel/ControlPanel.astro";
import { COUNT_PER_PAGE } from "@/config";
import MainGridLayout from "@/layouts/MainGridLayout.astro";
import { getBooks } from "@/scripts/library/microcms";
import { getMonthlyReportList, getSortedBlogs, getTagList } from "@/utils/content-utils";

const allBlogPosts = await getSortedBlogs();
const reportData = await getMonthlyReportList();
const books = await getBooks();
---

<MainGridLayout>
  <ControlPanel
    title="NEW BLOG"
    page={allBlogPosts.slice(0, 6)}
    link="/blog/"
  />

  <ControlPanel
    title="月報"
    page={reportData}
    link="/blog/tag/monthly-report"
  />

  <BookControlPanel
    title="読んだ本リスト"
    books={books.slice(0, 6)}
    link="/book/"
  />

</MainGridLayout>
